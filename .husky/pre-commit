#!/usr/bin/env sh

STAGED_FILES="$(git diff --cached --name-only)"

# Always run biome against staged files
pnpm biome:staged

# Conditionally typecheck workers when relevant files are staged
if printf "%s" "$STAGED_FILES" | grep -q '^workers/'; then
  pnpm typecheck:workers
fi

# Conditionally typecheck Nuxt app when relevant files are staged
if printf "%s" "$STAGED_FILES" | grep -q '^site/'; then
  pnpm typecheck:site
fi
